{{> ../hbs/templates/default}}

<a-scene>
  <a-assets teleport-refresh vr-mode-ui="enabled: true">
    <img id="pyramid-img" crossOrigin="anonymous" src="{{ asset "piramide.jpg" }}">
    <img id="pyramid" src="{{ asset "piramide.jpg" }}">
    <img id="portalImg" src="{{ asset "img/portal.png" }}">
    <img id="shadowImg" src="{{ asset "img/shadow.png" }}">
    <img id="sliceImg" src="{{ asset "img/slice.png" }}">

    {{!-- Mixins --}}
    {{> hand-mixin }}
    {{> portal-mixins}}
  </a-assets>

  <a-sky color="black">
  </a-sky>
  <a-entity star-system>
    <a-animation attribute="rotation" easing="linear" dur="50000" to="360 360 0" repeat="indefinite"></a-animation>
  </a-entity>

  <a-entity id="cameraRig">
    <a-entity id="head" position="0 1.6 0" camera look-controls="pointerLockEnabled:true">
      <!-- Control for Web and Mobile -->
      {{> non-vr-control }}
      <a-entity id="teleportFader" geometry="primitive: box" material="color: #111; shader: flat; side: back" visible="false"></a-entity>
    </a-entity>

    {{> teleport-controls}}
  </a-entity>

  <!-- Portals -->
  {{> portal id="home-portal"
  href="../index.html"
  img="../assets/img/portal/piramide.jpg"
  name="Inicio"
  position="-4 0.5 -6" }}

  {{> portal id="home-portal"
  href="./pyramid.html"
  img="../assets/img/portal/piramide.jpg"
  name="Piramide"
  position="4 0.5 -6" }}

  <a-box color="tomato" depth="2" height="4" width="3" position="0 1 -6" data-click="box"></a-box>

  {{!--
  TODO:
  Como los controles de colisi√≥n solo funcionan en "colision", se necesita agregar un mesh sobre
  la caja para que esta pueda funcionar y agregarle un dataset para ser evaluado en teleport-listener.js

  al reconocerlo se le agrega un hijo que sea el componente a mostrar (o se carga previamente y se cambia
  el stado de visible=false) y de esta forma se puede realizar el toggle.
  --}}
</a-scene>