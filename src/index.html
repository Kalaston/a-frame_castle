<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Yolistli</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="shortcut icon" href="assets/favicon.png">
    <link rel="manifest" href="manifest.json">
</head>

<body>

    <a-scene stats renderer="antialias: false;
             gammaOutput: true;
             sortObjects: true;
             physicallyCorrectLights: true"
             data-is-home="true"
             teleport-refresh
             vr-mode-ui="enabled: true">

        <!-- Asset management system. -->
        <a-assets>
            <a-asset-item id="scenario" src="assets/castle/scene.gltf"></a-asset-item>
            <img id="pyramid" src="/assets/piramide.jpg">

            <!-- Mixins -->
            <a-mixin id="hand"
                     teleport-controls="cameraRig: #cameraRig; teleportOrigin: #head; type: line; collisionEntities: [ground], [portal]; landingMaxAngle: 360; hitCylinderColor: #ff9f2b; curveHitColor: #FAFAFA; hitCylinderHeight: 0.05; checkCollisionChildren: false; hitEntityAlignNormal: false; maxLength: 15"
                     teleport-listener
            ></a-mixin>

            <a-mixin id="portal"
                     look-at="#camera"
                     geometry="primitive: circle; segments: 64"
                     material="shader: yolistliPortal; backgroundColor: #333; transparent: true"
                     animation__mouseenterscale="property: scale; from: 1 1 1; to: 1.1 1.1 1.1; easing: easeInOutQuad; dir: alternate; loop: true; startEvents: mouseenter; dur: 1000; pauseEvents: mouseleave"></a-mixin>
        </a-assets>

        <!-- Nav Mesh -->
        <a-entity ground gltf-model="assets/navmesh.gltf" nav-mesh visible="false"></a-entity>

        <!-- Scene. -->
        <a-entity id="cameraRig">
            <a-entity id="head" position="0 1.6 0" camera look-controls="pointerLockEnabled:true">
                <!-- Control for Web and Mobile -->
                <a-entity position="0.1 -0.1 0" teleport-extras mixin="hand"
                          teleport-controls="startEvents: starttouch; endEvents: endtouch"></a-entity>
                <a-entity id="teleportFader" geometry="primitive: box" material="color: #111; shader: flat; side: back" visible="false"></a-entity>
            </a-entity>

            <!-- SECOND HAND: Primary hand. -->
            <a-entity id="left-hand" mixin="hand"  teleport-controls="startEvents: teleportstart; endEvents: teleportend"
                  vive-controls="hand: left" oculus-touch-controls="hand: left" microsoft-motion-controls="hand: left"
                  daydream-controls="hand: left">
            </a-entity>

            <!-- RIGHT HAND: Primary hand. -->
            <a-entity id="right-hand" mixin="hand" teleport-controls="startEvents: teleportstart; endEvents: teleportend"
                  vive-controls="hand: right" microsoft-motion-controls="hand: right" oculus-touch-controls="hand: right"
                  daydream-controls="hand: right">
            </a-entity>
        </a-entity>

        <a-entity gltf-model="#scenario" position="7 -13 0"></a-entity>

        <a-simple-sun-sky sun-position="-5 8 3"></a-simple-sun-sky>

        <!-- Portals -->
        <a-link
            portal
            class="portal"
            href="templates/pyramid.html"
            title="Piramide" image="#pyramid"
            position="-11 0.5 -7"
            rotation="0 60 0"
        ></a-link>

    </a-scene>

</body>

</html>
